<style>
  #random-post-daily {
    display: none;
    margin: 20px 0;
    padding: 1.5px;
    background: linear-gradient(135deg, #8875F5 0%, transparent 100%);
    border-radius: 12px;
    overflow: hidden;
    animation: fadeInUp 0.6s ease-out forwards;
    transition: all 0.3s ease;
  }
  
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(15px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .rp-inner { background: var(--content-bg); border-radius: 11px; padding: 18px; display: flex; flex-direction: column; gap: 12px; }
  .rp-header { font-size: 13px; font-weight: 700; color: #8875F5; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; gap: 10px; }
  .rp-header::after { content: ''; flex: 1; height: 1px; background: var(--border-color); opacity: 0.5; }
  #rp-content { display: flex; gap: 15px; text-decoration: none; color: var(--text-color); align-items: center; }
  .rp-img-frame { width: 75px; height: 75px; border-radius: 8px; overflow: hidden; flex-shrink: 0; background: var(--lighter-bg); }
  #rp-image { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
  #rp-content:hover #rp-image { transform: scale(1.1); }
  .rp-info { flex: 1; min-width: 0; }
  #rp-title { font-size: 15px; font-weight: 600; line-height: 1.4; margin: 0 0 4px 0; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; color: var(--text-color); transition: color 0.3s ease; }
  #rp-content:hover #rp-title { color: #8875F5; }
  #rp-date { font-size: 11px; color: var(--text-color); opacity: 0.6; }
</style>

<div id="random-post-daily">
  <div class="rp-inner">
    <div class="rp-header">Postingan Pilihan Hari Ini</div>
    <a id="rp-content" href="#">
      <div class="rp-img-frame">
        <img id="rp-image" src="" alt="Thumbnail" />
      </div>
      <div class="rp-info">
        <h3 id="rp-title">Memuat...</h3>
        <span id="rp-date"></span>
      </div>
    </a>
  </div>
</div>

<script>
(function() {
  const isHomepage = window.location.pathname === '/' || window.location.pathname === '/index.html';
  
  if (!isHomepage) {
    const element = document.getElementById('random-post-daily');
    if (element) element.remove();
    return;
  }

  const API_KEY = 'AIzaSyDPliBpzAnGEJhxNuhVdHIG7iri3ga4_0E';
  const BLOG_ID = '5360007822337580481';
  
  async function fetchRandomPost() {
    try {
      const bRes = await fetch(`https://www.googleapis.com/blogger/v3/blogs/${BLOG_ID}?key=${API_KEY}`);
      const bData = await bRes.json();
      const total = parseInt(bData.posts.totalItems);
      
      const today = new Date();
      const seed = today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
      const randIdx = Math.floor((Math.abs(Math.sin(seed) * 10000) % 1) * total);

      const pRes = await fetch(`https://www.googleapis.com/blogger/v3/blogs/${BLOG_ID}/posts?key=${API_KEY}&maxResults=1&startIndex=${randIdx}&fields=items(title,url,published,images)`);
      const pData = await pRes.json();
      const post = pData.items[0];

      if (post) {
        document.getElementById('rp-title').innerText = post.title;
        document.getElementById('rp-content').href = post.url;
        document.getElementById('rp-date').innerText = new Date(post.published).toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
        document.getElementById('rp-image').src = post.images ? post.images[0].url.replace(/\/s\d+\//, '/s200/') : 'https://placehold.co/200x200/8875F5/ffffff?text=Gambar+Kosong';
        document.getElementById('random-post-daily').style.display = 'block';
      }
    } catch (e) {
      console.error("Widget Error:", e);
    }
  }

  fetchRandomPost();
})();
</script>
